<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asuntojen hintakartta 2025</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
        
        #header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
        }
        
        #stats {
            display: flex;
            gap: 15px;
            padding: 15px 20px;
            background: #f8f9fa;
            flex-wrap: wrap;
        }
        .stat-box {
            background: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .stat-box .label { font-size: 12px; color: #666; }
        .stat-box .value { font-size: 20px; font-weight: bold; }
        
        #map { height: calc(100vh - 120px); width: 100%; }
        
        .legend {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .legend-item { display: flex; align-items: center; gap: 8px; margin: 5px 0; }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
            border: 1px solid #999;
        }
        
        .popup-content { min-width: 250px; }
        .popup-content h3 { color: #1e3c72; margin-bottom: 8px; }
        .popup-content .price { font-size: 28px; font-weight: bold; color: #27ae60; }
        .popup-content .details { margin-top: 8px; color: #666; font-size: 13px; }
        
        #search-box {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        #search-box input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 200px;
        }
        
        .city-buttons {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 1000;
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        .city-buttons button {
            padding: 8px 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .city-buttons button:hover { background: #f0f0f0; }
        
        .info-box {
            position: absolute;
            bottom: 30px;
            left: 10px;
            z-index: 1000;
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            font-size: 12px;
            color: #666;
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>üè† Asuntojen hintakartta 2025</h1>
        <p>Vanhojen osakeasuntojen neli√∂hinnat (EUR/m¬≤) | Tilastokeskus</p>
    </div>
    
    <div id="stats">
        <div class="stat-box">
            <div class="label">Postinumeroalueita</div>
            <div class="value">176</div>
        </div>
        <div class="stat-box">
            <div class="label">Keskihinta</div>
            <div class="value">3,442 ‚Ç¨/m¬≤</div>
        </div>
        <div class="stat-box">
            <div class="label">Kallein</div>
            <div class="value" style="color: #e74c3c;">8,611 ‚Ç¨/m¬≤</div>
        </div>
        <div class="stat-box">
            <div class="label">Halvin</div>
            <div class="value" style="color: #27ae60;">1,016 ‚Ç¨/m¬≤</div>
        </div>
    </div>
    
    <div class="city-buttons">
        <button onclick="map.setView([60.1699, 24.9384], 12)">Helsinki</button>
        <button onclick="map.setView([60.2052, 24.6566], 12)">Espoo</button>
        <button onclick="map.setView([60.2944, 24.9722], 12)">Vantaa</button>
        <button onclick="map.setView([61.4978, 23.7608], 12)">Tampere</button>
        <button onclick="map.setView([60.4518, 22.6306], 12)">Turku</button>
        <button onclick="map.setView([65.0121, 25.4651], 12)">Oulu</button>
        <button onclick="map.setView([60.9827, 25.6650], 12)">Lahti</button>
    </div>
    
    <div id="search-box">
        <input type="text" id="search" placeholder="Hae postinumeroa..." onkeyup="filterMap()">
    </div>
    
    <div id="map"></div>
    
    <div class="info-box">
        üõà 176 postinumeroaluetta kartalla
    </div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        var map = L.map('map').setView([60.1699, 24.9384], 11);
        
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '¬© OpenStreetMap'
        }).addTo(map);
        
        var priceData = {"00100": {"name": "00100  Helsinki keskusta - Etu-T\u00f6\u00f6l\u00f6 (Helsinki)", "price": 7344.333333333333, "city": "Helsinki"}, "00120": {"name": "00120  Punavuori - Bulevardi (Helsinki)", "price": 8345.0, "city": "Helsinki"}, "00130": {"name": "00130  Kaartinkaupunki (Helsinki)", "price": 7617.333333333333, "city": "Helsinki"}, "00140": {"name": "00140  Kaivopuisto - Ullanlinna (Helsinki)", "price": 8611.0, "city": "Helsinki"}, "00150": {"name": "00150  Punavuori - Eira - Hernesaari (Helsinki)", "price": 8211.0, "city": "Helsinki"}, "00160": {"name": "00160  Katajanokka (Helsinki)", "price": 7387.666666666667, "city": "Helsinki"}, "00170": {"name": "00170  Kruununhaka (Helsinki)", "price": 7328.666666666667, "city": "Helsinki"}, "00180": {"name": "00180  Kamppi - Ruoholahti (Helsinki)", "price": 6815.666666666667, "city": "Helsinki"}, "00200": {"name": "00200  Pohjois-Lauttasaari (Helsinki)", "price": 6648.0, "city": "Helsinki"}, "00210": {"name": "00210  Vattuniemi (Helsinki)", "price": 6184.666666666667, "city": "Helsinki"}, "00240": {"name": "00240  L\u00e4nsi-Pasila (Helsinki)", "price": 4594.0, "city": "Helsinki"}, "00250": {"name": "00250  Taka-T\u00f6\u00f6l\u00f6 (Helsinki)", "price": 6362.333333333333, "city": "Helsinki"}, "00260": {"name": "00260  Keski-T\u00f6\u00f6l\u00f6 (Helsinki)", "price": 7074.333333333333, "city": "Helsinki"}, "00300": {"name": "00300  Pikku Huopalahti (Helsinki)", "price": 4602.0, "city": "Helsinki"}, "00310": {"name": "00310  Kivihaka (Helsinki)", "price": 3918.0, "city": "Helsinki"}, "00320": {"name": "00320  Etel\u00e4-Haaga (Helsinki)", "price": 4971.666666666667, "city": "Helsinki"}, "00330": {"name": "00330  Munkkiniemi (Helsinki)", "price": 6412.333333333333, "city": "Helsinki"}, "00340": {"name": "00340  Kuusisaari - Lehtisaari (Helsinki)", "price": 3520.0, "city": "Helsinki"}, "00350": {"name": "00350  Munkkivuori - Niemenm\u00e4ki (Helsinki)", "price": 4659.666666666667, "city": "Helsinki"}, "00360": {"name": "00360  Pajam\u00e4ki (Helsinki)", "price": 3937.6666666666665, "city": "Helsinki"}, "00370": {"name": "00370  Reimarla (Helsinki)", "price": 3334.6666666666665, "city": "Helsinki"}, "00380": {"name": "00380  Pit\u00e4j\u00e4nm\u00e4en yritysalue (Helsinki)", "price": 4625.5, "city": "Helsinki"}, "00390": {"name": "00390  Konala (Helsinki)", "price": 3241.5, "city": "Helsinki"}, "00400": {"name": "00400  Pohjois-Haaga (Helsinki)", "price": 4227.666666666667, "city": "Helsinki"}, "00410": {"name": "00410  Malminkartano (Helsinki)", "price": 2592.75, "city": "Helsinki"}, "00420": {"name": "00420  Kannelm\u00e4ki (Helsinki)", "price": 3034.25, "city": "Helsinki"}, "00430": {"name": "00430  Maununneva - Kuninkaantammi (Helsinki)", "price": 3760.3333333333335, "city": "Helsinki"}, "00440": {"name": "00440  Lassila (Helsinki)", "price": 3479.6666666666665, "city": "Helsinki"}, "00500": {"name": "00500  S\u00f6rn\u00e4inen - Harju (Helsinki)", "price": 5160.333333333333, "city": "Helsinki"}, "00510": {"name": "00510  Alppila - Vallila (Helsinki)", "price": 5451.333333333333, "city": "Helsinki"}, "00520": {"name": "00520  It\u00e4- ja Keski-Pasila (Helsinki)", "price": 5742.0, "city": "Helsinki"}, "00530": {"name": "00530  Kallio (Helsinki)", "price": 5685.0, "city": "Helsinki"}, "00540": {"name": "00540  Kalasatama - Sompasaari (Helsinki)", "price": 8125.0, "city": "Helsinki"}, "00560": {"name": "00560  Toukola - Kumpula - Vanhakaupunki (Helsinki)", "price": 5445.666666666667, "city": "Helsinki"}, "00570": {"name": "00570  Kulosaari (Helsinki)", "price": 5620.0, "city": "Helsinki"}, "00580": {"name": "00580  Kalasatama - Kyl\u00e4saari (Helsinki)", "price": 7534.0, "city": "Helsinki"}, "00600": {"name": "00600  Koskela (Helsinki)", "price": 3509.6666666666665, "city": "Helsinki"}, "00610": {"name": "00610  K\u00e4pyl\u00e4 (Helsinki)", "price": 5543.25, "city": "Helsinki"}, "00700": {"name": "00700  Malmi (Helsinki)", "price": 3091.0, "city": "Helsinki"}, "00710": {"name": "00710  Pihlajam\u00e4ki - Viikinm\u00e4ki (Helsinki)", "price": 2803.25, "city": "Helsinki"}, "00720": {"name": "00720  Pukinm\u00e4ki (Helsinki)", "price": 2825.25, "city": "Helsinki"}, "00730": {"name": "00730  Tapanila (Helsinki)", "price": 3708.25, "city": "Helsinki"}, "00740": {"name": "00740  Siltam\u00e4ki (Helsinki)", "price": 2265.25, "city": "Helsinki"}, "00750": {"name": "00750  Tapulikaupunki (Helsinki)", "price": 2423.3333333333335, "city": "Helsinki"}, "00760": {"name": "00760  Puistola - Heikinlaakso (Helsinki)", "price": 3006.0, "city": "Helsinki"}, "00770": {"name": "00770  Jakom\u00e4ki - Alppikyl\u00e4 (Helsinki)", "price": 2612.5, "city": "Helsinki"}, "00780": {"name": "00780  Tapaninvainio (Helsinki)", "price": 2896.0, "city": "Helsinki"}, "00790": {"name": "00790  Viikki (Helsinki)", "price": 4187.0, "city": "Helsinki"}, "00800": {"name": "00800  L\u00e4nsi-Herttoniemi (Helsinki)", "price": 4685.666666666667, "city": "Helsinki"}, "00810": {"name": "00810  Herttoniemenranta (Helsinki)", "price": 5218.333333333333, "city": "Helsinki"}, "00820": {"name": "00820  Roihuvuori (Helsinki)", "price": 3880.3333333333335, "city": "Helsinki"}, "00830": {"name": "00830  Tammisalo (Helsinki)", "price": 4396.0, "city": "Helsinki"}, "00840": {"name": "00840  Yliskyl\u00e4 (Helsinki)", "price": 3707.0, "city": "Helsinki"}, "00850": {"name": "00850  Jollas (Helsinki)", "price": 4191.0, "city": "Helsinki"}, "00870": {"name": "00870  Gunillanm\u00e4ki - Hevossalmi (Helsinki)", "price": 3166.3333333333335, "city": "Helsinki"}, "00900": {"name": "00900  Puotinharju (Helsinki)", "price": 2254.0, "city": "Helsinki"}, "00910": {"name": "00910  Puotila (Helsinki)", "price": 3235.6666666666665, "city": "Helsinki"}, "00920": {"name": "00920  Myllypuro (Helsinki)", "price": 2849.75, "city": "Helsinki"}, "00930": {"name": "00930  It\u00e4keskus - Marjaniemi (Helsinki)", "price": 2596.0, "city": "Helsinki"}, "00940": {"name": "00940  Kontula - Vesala - Kivikko (Helsinki)", "price": 2435.0, "city": "Helsinki"}, "00950": {"name": "00950  Vartioharju (Helsinki)", "price": 3059.3333333333335, "city": "Helsinki"}, "00960": {"name": "00960  Pohjois-Vuosaari (Helsinki)", "price": 2540.5, "city": "Helsinki"}, "00970": {"name": "00970  Mellunm\u00e4ki (Helsinki)", "price": 2315.75, "city": "Helsinki"}, "00980": {"name": "00980  Etel\u00e4-Vuosaari (Helsinki)", "price": 3000.0, "city": "Helsinki"}, "00990": {"name": "00990  Aurinkolahti (Helsinki)", "price": 4438.5, "city": "Helsinki"}, "01300": {"name": "01300  Tikkurila (Vantaa)", "price": 3537.75, "city": "Vantaa"}, "01350": {"name": "01350  Hiekkaharju (Vantaa)", "price": 2746.25, "city": "Vantaa"}, "01370": {"name": "01370  Jokiniemi (Vantaa)", "price": 3143.6666666666665, "city": "Vantaa"}, "01380": {"name": "01380  Kuusikko-Hakkila (Vantaa)", "price": 3610.0, "city": "Vantaa"}, "01390": {"name": "01390  Ruskeasanta-Ilola (Vantaa)", "price": 2781.0, "city": "Vantaa"}, "01400": {"name": "01400  Rekola (Vantaa)", "price": 3258.25, "city": "Vantaa"}, "01450": {"name": "01450  Korso (Vantaa)", "price": 2143.25, "city": "Vantaa"}, "01510": {"name": "01510  Kirkonkyl\u00e4-Verom\u00e4ki (Vantaa)", "price": 4031.5, "city": "Vantaa"}, "01520": {"name": "01520  Tammisto (Vantaa)", "price": 3844.3333333333335, "city": "Vantaa"}, "01600": {"name": "01600  Myyrm\u00e4ki (Vantaa)", "price": 2491.3333333333335, "city": "Vantaa"}, "01610": {"name": "01610  Kaivoksela (Vantaa)", "price": 2841.5, "city": "Vantaa"}, "01620": {"name": "01620  Martinlaakso (Vantaa)", "price": 2491.5, "city": "Vantaa"}, "01630": {"name": "01630  H\u00e4meenkyl\u00e4 (Vantaa)", "price": 2591.0, "city": "Vantaa"}, "01640": {"name": "01640  H\u00e4mevaara (Vantaa)", "price": 3003.0, "city": "Vantaa"}, "01650": {"name": "01650  Vapaala (Vantaa)", "price": 1814.0, "city": "Vantaa"}, "01660": {"name": "01660  Varisto (Vantaa)", "price": 3023.0, "city": "Vantaa"}, "01670": {"name": "01670  Vantaanlaakso (Vantaa)", "price": 2885.5, "city": "Vantaa"}, "01690": {"name": "01690  Yl\u00e4st\u00f6 (Vantaa)", "price": 3843.0, "city": "Vantaa"}, "01700": {"name": "01700  Kivist\u00f6 (Vantaa)", "price": 3649.25, "city": "Vantaa"}, "01710": {"name": "01710  P\u00e4hkin\u00e4rinne (Vantaa)", "price": 2330.75, "city": "Vantaa"}, "01730": {"name": "01730  Vantaanpuisto (Vantaa)", "price": 2652.0, "city": "Vantaa"}, "01800": {"name": "01800  Klaukkala Keskus (Nurmij\u00e4rvi)", "price": 2346.5, "city": "Nurmij\u00e4rvi"}, "01820": {"name": "01820  Haikala (Nurmij\u00e4rvi)", "price": 2229.0, "city": "Nurmij\u00e4rvi"}, "01840": {"name": "01840  Klaukkala (Nurmij\u00e4rvi)", "price": 2241.0, "city": "Nurmij\u00e4rvi"}, "02100": {"name": "02100  Tapiola (Espoo)", "price": 5506.25, "city": "Espoo"}, "02150": {"name": "02150  Otaniemi (Espoo)", "price": 4405.0, "city": "Espoo"}, "02160": {"name": "02160  Westend (Espoo)", "price": 5023.5, "city": "Espoo"}, "02170": {"name": "02170  Haukilahti (Espoo)", "price": 4414.5, "city": "Espoo"}, "02180": {"name": "02180  Mankkaa (Espoo)", "price": 4027.0, "city": "Espoo"}, "02200": {"name": "02200  Niittykumpu (Espoo)", "price": 4912.0, "city": "Espoo"}, "02210": {"name": "02210  Olari (Espoo)", "price": 3224.75, "city": "Espoo"}, "02230": {"name": "02230  Matinkyl\u00e4 (Espoo)", "price": 4232.0, "city": "Espoo"}, "02250": {"name": "02250  Henttaa (Espoo)", "price": 4230.5, "city": "Espoo"}, "02300": {"name": "02300  N\u00f6ykki\u00f6npuro (Espoo)", "price": 3283.0, "city": "Espoo"}, "02340": {"name": "02340  Latokaski (Espoo)", "price": 3213.0, "city": "Espoo"}, "02360": {"name": "02360  Soukka (Espoo)", "price": 3021.25, "city": "Espoo"}, "02400": {"name": "02400  Kirkkonummi Keskus (Kirkkonummi)", "price": 2189.25, "city": "Kirkkonummi"}, "02460": {"name": "02460  Kantvik (Kirkkonummi)", "price": 2243.0, "city": "Kirkkonummi"}, "02480": {"name": "02480  Porkkala (Kirkkonummi)", "price": 2713.0, "city": "Kirkkonummi"}, "02600": {"name": "02600  Etel\u00e4-Lepp\u00e4vaara (Espoo)", "price": 4111.5, "city": "Espoo"}, "02650": {"name": "02650  Pohjois-Lepp\u00e4vaara (Espoo)", "price": 3802.25, "city": "Espoo"}, "02700": {"name": "02700  Kauniainen (Kauniainen)", "price": 4334.0, "city": "Kauniainen"}, "02780": {"name": "02780  Kauklahti (Espoo)", "price": 3281.3333333333335, "city": "Espoo"}, "15100": {"name": "15100  Lahti Asemanseutu (Lahti)", "price": 2142.0, "city": "Lahti"}, "15110": {"name": "15110  Keski-Lahti (Lahti)", "price": 2370.6666666666665, "city": "Lahti"}, "15140": {"name": "15140  Kartano-Paavola (Lahti)", "price": 2265.0, "city": "Lahti"}, "15150": {"name": "15150  M\u00f6ys\u00e4 (Lahti)", "price": 1464.0, "city": "Lahti"}, "15170": {"name": "15170  Tenava-Tonttila (Lahti)", "price": 1016.6666666666666, "city": "Lahti"}, "15200": {"name": "15200  Kiveri\u00f6 (Lahti)", "price": 1037.5, "city": "Lahti"}, "15230": {"name": "15230  Kyt\u00f6l\u00e4 (Lahti)", "price": 2291.0, "city": "Lahti"}, "15240": {"name": "15240  Mukkula (Lahti)", "price": 1128.0, "city": "Lahti"}, "15300": {"name": "15300  Myllypohja-Koiskala (Lahti)", "price": 1191.0, "city": "Lahti"}, "15320": {"name": "15320  Ahtiala (Lahti)", "price": 1565.0, "city": "Lahti"}, "20100": {"name": "20100  Turku Keskus (Turku)", "price": 3747.0, "city": "Turku"}, "20200": {"name": "20200  Iso-Heikkil\u00e4 (Turku)", "price": 2603.6666666666665, "city": "Turku"}, "20210": {"name": "20210  Pahaniemi (Turku)", "price": 1055.0, "city": "Turku"}, "20240": {"name": "20240  Pansio-Perno (Turku)", "price": 1089.0, "city": "Turku"}, "20300": {"name": "20300  Pohjola-Kastu (Turku)", "price": 2670.0, "city": "Turku"}, "20360": {"name": "20360  Runosm\u00e4ki-K\u00e4rs\u00e4m\u00e4ki (Turku)", "price": 1513.5, "city": "Turku"}, "20500": {"name": "20500  Vesilinna (Turku)", "price": 3548.3333333333335, "city": "Turku"}, "20520": {"name": "20520  Kupittaa (Turku)", "price": 4170.0, "city": "Turku"}, "20540": {"name": "20540  Nummi-Ylioppilaskyl\u00e4 (Turku)", "price": 2649.25, "city": "Turku"}, "20610": {"name": "20610  Varissuo (Turku)", "price": 1391.75, "city": "Turku"}, "20700": {"name": "20700  Vartiovuori-Samppalinna (Turku)", "price": 3515.3333333333335, "city": "Turku"}, "20720": {"name": "20720  Vasaram\u00e4ki (Turku)", "price": 2467.75, "city": "Turku"}, "20740": {"name": "20740  Ilpoinen-Harittu (Turku)", "price": 2024.0, "city": "Turku"}, "20760": {"name": "20760  Piispanristi (Kaarina)", "price": 2264.0, "city": "Kaarina"}, "20780": {"name": "20780  Kaarina Keskus (Kaarina)", "price": 2321.75, "city": "Kaarina"}, "20810": {"name": "20810  Martti-Korppolaism\u00e4ki (Turku)", "price": 3624.0, "city": "Turku"}, "33100": {"name": "33100  Tampere Keskus (Tampere)", "price": 4029.0, "city": "Tampere"}, "33200": {"name": "33200  Tampere Keskus L\u00e4ntinen (Tampere)", "price": 3899.6666666666665, "city": "Tampere"}, "33210": {"name": "33210  It\u00e4-Amuri-Tammerkoski (Tampere)", "price": 3929.6666666666665, "city": "Tampere"}, "33230": {"name": "33230  L\u00e4nsi-Amuri (Tampere)", "price": 3780.0, "city": "Tampere"}, "33240": {"name": "33240  Tahmela (Tampere)", "price": 3276.6666666666665, "city": "Tampere"}, "33250": {"name": "33250  Pispala (Tampere)", "price": 3672.0, "city": "Tampere"}, "33270": {"name": "33270  Epil\u00e4 (Tampere)", "price": 2669.5, "city": "Tampere"}, "33300": {"name": "33300  Rahola (Tampere)", "price": 2270.3333333333335, "city": "Tampere"}, "33310": {"name": "33310  Tesoma (Tampere)", "price": 1958.5, "city": "Tampere"}, "33330": {"name": "33330  Myllypuro-Kalkku (Tampere)", "price": 2019.5, "city": "Tampere"}, "33340": {"name": "33340  Haukiluoma-Ikuri (Tampere)", "price": 2049.0, "city": "Tampere"}, "33400": {"name": "33400  Luoteis-Tampere (Tampere)", "price": 3468.25, "city": "Tampere"}, "33410": {"name": "33410  Lent\u00e4v\u00e4nniemi (Tampere)", "price": 2319.75, "city": "Tampere"}, "33420": {"name": "33420  Lamminp\u00e4\u00e4 (Tampere)", "price": 2127.0, "city": "Tampere"}, "33500": {"name": "33500  Osmonm\u00e4ki-Petsamo (Tampere)", "price": 3484.3333333333335, "city": "Tampere"}, "33530": {"name": "33530  Kissanmaa (Tampere)", "price": 2904.75, "city": "Tampere"}, "33580": {"name": "33580  Atala-Linnainmaa (Tampere)", "price": 2541.75, "city": "Tampere"}, "33610": {"name": "33610  Olkahinen-Tasanne (Tampere)", "price": 2242.0, "city": "Tampere"}, "33700": {"name": "33700  Messukyl\u00e4 (Tampere)", "price": 3074.0, "city": "Tampere"}, "33710": {"name": "33710  Kaukaj\u00e4rvi (Tampere)", "price": 2251.5, "city": "Tampere"}, "33720": {"name": "33720  Hervanta (Tampere)", "price": 2312.75, "city": "Tampere"}, "33800": {"name": "33800  Nekala (Tampere)", "price": 2752.0, "city": "Tampere"}, "33880": {"name": "33880  H\u00f6yt\u00e4m\u00f6 (Lemp\u00e4\u00e4l\u00e4)", "price": 1817.5, "city": "Lemp\u00e4\u00e4l\u00e4"}, "33900": {"name": "33900  H\u00e4rm\u00e4l\u00e4-Rantaperki\u00f6 (Tampere)", "price": 3301.75, "city": "Tampere"}, "33950": {"name": "33950  Killo (Pirkkala)", "price": 2724.0, "city": "Pirkkala"}, "90100": {"name": "90100  Oulu Keskus (Oulu)", "price": 3039.3333333333335, "city": "Oulu"}, "90120": {"name": "90120  Hein\u00e4p\u00e4\u00e4 (Oulu)", "price": 2405.3333333333335, "city": "Oulu"}, "90130": {"name": "90130  Raksila (Oulu)", "price": 2508.0, "city": "Oulu"}, "90140": {"name": "90140  Karjasilta (Oulu)", "price": 2615.6666666666665, "city": "Oulu"}, "90150": {"name": "90150  H\u00f6yhty\u00e4 (Oulu)", "price": 1560.75, "city": "Oulu"}, "90230": {"name": "90230  V\u00e4rtt\u00f6-Maikkula (Oulu)", "price": 2406.75, "city": "Oulu"}, "90250": {"name": "90250  Kaukovainio (Oulu)", "price": 1729.75, "city": "Oulu"}, "90500": {"name": "90500  Tuira (Oulu)", "price": 2029.3333333333333, "city": "Oulu"}, "90510": {"name": "90510  Hietasaari (Oulu)", "price": 2929.5, "city": "Oulu"}, "90520": {"name": "90520  Taskila-Toppila (Oulu)", "price": 2611.5, "city": "Oulu"}, "90530": {"name": "90530  V\u00e4livainio (Oulu)", "price": 1949.75, "city": "Oulu"}, "90540": {"name": "90540  Kuivasj\u00e4rvi (Oulu)", "price": 2514.5, "city": "Oulu"}, "90550": {"name": "90550  Pyyk\u00f6sj\u00e4rvi-Puoliv\u00e4linkangas (Oulu)", "price": 1262.5, "city": "Oulu"}, "90570": {"name": "90570  Kaijonharju-Linnanmaa (Oulu)", "price": 1659.75, "city": "Oulu"}, "90630": {"name": "90630  Korvensuora (Oulu)", "price": 2213.0, "city": "Oulu"}, "90650": {"name": "90650  Haapalehto (Oulu)", "price": 1739.5, "city": "Oulu"}, "90670": {"name": "90670  Hiukkavaara (Oulu)", "price": 2484.5, "city": "Oulu"}};
        var postalCoords = {"00100": [60.1701, 24.9336], "00120": [60.1675, 24.9425], "00130": [60.165, 24.95], "00140": [60.16, 24.955], "00150": [60.162, 24.935], "00160": [60.168, 24.965], "00170": [60.175, 24.952], "00180": [60.158, 24.93], "00190": [60.155, 24.945], "00200": [60.15, 24.93], "00210": [60.148, 24.94], "00240": [60.145, 24.925], "00250": [60.145, 24.92], "00260": [60.14, 24.91], "00300": [60.135, 24.885], "00310": [60.13, 24.88], "00320": [60.125, 24.87], "00330": [60.12, 24.865], "00340": [60.115, 24.86], "00350": [60.11, 24.855], "00360": [60.105, 24.85], "00370": [60.1, 24.845], "00380": [60.095, 24.84], "00390": [60.09, 24.83], "00400": [60.24, 25.08], "00410": [60.235, 25.07], "00420": [60.225, 25.06], "00430": [60.215, 25.05], "00440": [60.205, 25.04], "00500": [60.155, 24.975], "00510": [60.16, 24.98], "00520": [60.155, 24.97], "00530": [60.15, 24.965], "00540": [60.162, 24.99], "00560": [60.17, 24.955], "00570": [60.175, 24.95], "00580": [60.165, 24.985], "00600": [60.185, 24.965], "00610": [60.19, 24.96], "00700": [60.195, 24.94], "00710": [60.2, 24.935], "00720": [60.205, 24.93], "00730": [60.21, 24.925], "00740": [60.215, 24.92], "00750": [60.22, 24.915], "00760": [60.225, 24.91], "00770": [60.23, 24.905], "00780": [60.235, 24.9], "00790": [60.24, 24.895], "00800": [60.175, 24.92], "00810": [60.17, 24.915], "00820": [60.165, 24.91], "00830": [60.16, 24.905], "00840": [60.155, 24.9], "00850": [60.15, 24.895], "00860": [60.145, 24.89], "00870": [60.14, 24.885], "00880": [60.135, 24.88], "00900": [60.205, 24.97], "00910": [60.21, 24.965], "00920": [60.215, 24.96], "00930": [60.22, 24.955], "00940": [60.225, 24.95], "00950": [60.23, 24.945], "00960": [60.235, 24.94], "00970": [60.24, 24.935], "00980": [60.245, 24.93], "00990": [60.25, 24.925], "02100": [60.2052, 24.6566], "02150": [60.215, 24.65], "02160": [60.225, 24.64], "02170": [60.235, 24.63], "02180": [60.245, 24.62], "02190": [60.255, 24.61], "02200": [60.265, 24.6], "02210": [60.275, 24.59], "02230": [60.285, 24.58], "02250": [60.295, 24.57], "02300": [60.305, 24.56], "02340": [60.315, 24.55], "02360": [60.325, 24.54], "02380": [60.335, 24.53], "02400": [60.345, 24.52], "02420": [60.355, 24.51], "02440": [60.365, 24.5], "02460": [60.375, 24.49], "02480": [60.385, 24.48], "02600": [60.395, 24.47], "02650": [60.405, 24.46], "02700": [60.415, 24.45], "02780": [60.425, 24.44], "01300": [60.2944, 24.9722], "01350": [60.285, 24.98], "01370": [60.275, 24.99], "01380": [60.265, 25.0], "01390": [60.255, 25.01], "01400": [60.245, 25.02], "01450": [60.235, 25.03], "01510": [60.31, 24.95], "01520": [60.305, 24.94], "01530": [60.3, 24.93], "01540": [60.295, 24.92], "01550": [60.29, 24.91], "01600": [60.32, 24.96], "01610": [60.325, 24.95], "01620": [60.33, 24.94], "01630": [60.335, 24.93], "01640": [60.34, 24.92], "01650": [60.345, 24.91], "01660": [60.35, 24.9], "01670": [60.355, 24.89], "01680": [60.36, 24.88], "01690": [60.365, 24.87], "01700": [60.37, 24.86], "01710": [60.375, 24.85], "01720": [60.38, 24.84], "01730": [60.385, 24.83], "01740": [60.39, 24.82], "01750": [60.395, 24.81], "01760": [60.4, 24.8], "01770": [60.405, 24.79], "01780": [60.41, 24.78], "01790": [60.415, 24.77], "01800": [60.42, 24.76], "01810": [60.425, 24.75], "01820": [60.43, 24.74], "01830": [60.435, 24.73], "01840": [60.44, 24.72], "01850": [60.445, 24.71], "01860": [60.45, 24.7], "01870": [60.455, 24.69], "01880": [60.46, 24.68], "01890": [60.465, 24.67], "33100": [61.4978, 23.7608], "33200": [61.49, 23.77], "33210": [61.485, 23.78], "33230": [61.48, 23.79], "33240": [61.475, 23.8], "33250": [61.47, 23.81], "33270": [61.465, 23.82], "33280": [61.46, 23.83], "33300": [61.5, 23.75], "33310": [61.505, 23.74], "33320": [61.51, 23.73], "33330": [61.515, 23.72], "33340": [61.52, 23.71], "33380": [61.525, 23.7], "33400": [61.53, 23.69], "33410": [61.535, 23.68], "33420": [61.54, 23.67], "33500": [61.495, 23.76], "33530": [61.5, 23.77], "33580": [61.505, 23.78], "33600": [61.51, 23.75], "33610": [61.515, 23.74], "33680": [61.52, 23.73], "33700": [61.525, 23.72], "33710": [61.53, 23.71], "33720": [61.535, 23.7], "33800": [61.54, 23.69], "33880": [61.545, 23.68], "33900": [61.55, 23.67], "33950": [61.555, 23.66], "20100": [60.4518, 22.6306], "20110": [60.455, 22.635], "20120": [60.46, 22.64], "20130": [60.465, 22.645], "20140": [60.47, 22.65], "20200": [60.475, 22.655], "20210": [60.48, 22.66], "20240": [60.485, 22.665], "20250": [60.49, 22.67], "20300": [60.495, 22.675], "20360": [60.5, 22.68], "20400": [60.505, 22.685], "20500": [60.445, 22.625], "20520": [60.44, 22.62], "20540": [60.435, 22.615], "20560": [60.43, 22.61], "20610": [60.425, 22.605], "20700": [60.42, 22.6], "20720": [60.415, 22.595], "20740": [60.41, 22.59], "20760": [60.405, 22.585], "20780": [60.4, 22.58], "20800": [60.395, 22.575], "20810": [60.39, 22.57], "90100": [65.0121, 25.4651], "90120": [65.015, 25.47], "90130": [65.018, 25.475], "90140": [65.02, 25.48], "90150": [65.022, 25.485], "90230": [65.01, 25.46], "90250": [65.005, 25.455], "90300": [65.0, 25.45], "90500": [65.02, 25.44], "90510": [65.025, 25.435], "90520": [65.03, 25.43], "90530": [65.035, 25.425], "90540": [65.04, 25.42], "90550": [65.045, 25.415], "90570": [65.05, 25.41], "90600": [65.055, 25.405], "90630": [65.06, 25.4], "90650": [65.065, 25.395], "90670": [65.07, 25.39], "90700": [65.075, 25.385], "90730": [65.08, 25.38], "90750": [65.085, 25.375], "15100": [60.9827, 25.665], "15110": [60.985, 25.67], "15120": [60.99, 25.675], "15140": [60.995, 25.68], "15150": [61.0, 25.685], "15170": [61.005, 25.69], "15200": [61.01, 25.695], "15230": [61.015, 25.7], "15240": [61.02, 25.705], "15300": [61.025, 25.71], "15320": [61.03, 25.715]};
        
        function getColor(price) {
            if (price > 8000) return '#8B0000';
            else if (price > 6000) return '#e74c3c';
            else if (price > 5000) return '#f39c12';
            else if (price > 4000) return '#f1c40f';
            else if (price > 3000) return '#9acd32';
            else if (price > 2000) return '#27ae60';
            else return '#2ecc71';
        }
        
        var markers = [];
        
        for (var postcode in priceData) {
            var data = priceData[postcode];
            var price = data.price;
            var coords = postalCoords[postcode];
            
            if (coords) {
                var marker = L.circleMarker([coords[0], coords[1]], {
                    radius: 12,
                    fillColor: getColor(price),
                    color: '#fff',
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.8
                }).addTo(map);
                
                marker.bindPopup(
                    '<div class="popup-content">' +
                    '<h3>' + postcode + '</h3>' +
                    '<div class="price">' + price.toLocaleString() + ' ‚Ç¨/m¬≤</div>' +
                    '<div class="details">' + data.name + '</div>' +
                    '</div>'
                );
                
                marker.postcode = postcode;
                markers.push(marker);
            }
        }
        
        // Legend
        var legend = L.control({position: 'bottomright'});
        legend.onAdd = function(map) {
            var div = L.DomUtil.create('div', 'legend');
            div.innerHTML = '<b>Hinta ‚Ç¨/m¬≤</b><br>';
            var grades = [0, 1500, 2000, 3000, 4000, 5000, 6000, 8000];
            var labels = ['< 1500', '1500-2000', '2000-3000', '3000-4000', '4000-5000', '5000-6000', '6000-8000', '> 8000'];
            
            for (var i = 0; i < grades.length; i++) {
                div.innerHTML += '<div class="legend-item"><div class="legend-color" style="background:' + getColor(grades[i] + 1) + '"></div>' + labels[i] + '</div>';
            }
            return div;
        };
        legend.addTo(map);
        
        function filterMap() {
            var query = document.getElementById('search').value.toLowerCase();
            
            markers.forEach(function(marker) {
                var postcode = marker.postcode.toLowerCase();
                var data = priceData[marker.postcode];
                
                if (query === '' || postcode.includes(query) || (data && data.name && data.name.toLowerCase().includes(query))) {
                    marker.setStyle({opacity: 1, fillOpacity: 0.8});
                } else {
                    marker.setStyle({opacity: 0.1, fillOpacity: 0.1});
                }
            });
        }
    </script>
</body>
</html>
